{{#if fetchRecords.last}}
  {{#if (and displayListViewSelector listViewsAsTabs)}}
    <ul class="list-view-tabs{{if (eq bootstrapVersion 4) ' nav nav-tabs' ' tab-nav'}}" role="tablist">
      {{#each availableListViews as |listView|}}
        <li class="{{if (eq listView.value activeListViewKey) 'active'}}{{if (eq bootstrapVersion 4) ' nav-item'}}">
          <a class="{{if (eq listView.value activeListViewKey) 'active'}}{{if (eq bootstrapVersion 4) ' nav-link'}}" role="tab" {{action 'listViewChanged' listView.value}}>{{listView.label}}</a>
        </li>
      {{/each}}
    </ul>
  {{/if}}

  <div class={{concat 'card-header ch-alt mist-model-table-header' (if searchToggled ' search-toggled')}}>
    <div class="table-header-title-wrapper">
      <h2>{{title}}</h2>
      {{#if fetchRecords.isRunning}}
        {{mist-spinner size="10px" tagName="span"}}
      {{else}}
        <span style="width: 10px;height:10px;display:inline-block;"></span>
      {{/if}}

      {{#if (and displayListViewSelector (not listViewsAsTabs))}}
        {{input-select class="list-view-selector plain-select" value=activeListViewKey selectOptions=availableListViews isRequired=true valueChanged=(action 'listViewChanged')}}
      {{/if}}
    </div>

    <div class="h-search-wrap">
      <div class="hsw-inner">
        {{#if (not fixedSearch)}}
          <i class="hsw-close zmdi zmdi-close" {{action "toggleSearch"}}></i>
        {{/if}}
        <form {{action "search" on="submit"}}>
          {{input-search value=queryParams.search placeholder="Search..." valueChanged=(action 'searchValueChanged')}}
        </form>
      </div>
    </div>

    <div id={{concat guid '-new'}}></div>

    {{#mist-menu id=(concat guid '-actions') class="actions"}}
      {{#mist-menu-item action=(action "search") className="waves-circle"}}<i class="zmdi zmdi-search"></i>{{/mist-menu-item}}
      {{#mist-menu-dropdown-item className="waves-circle"}}
        {{#mist-menu-item action=(action "refresh")}}<i class="zmdi zmdi-refresh zmdi-hc-lg"></i> Refresh{{/mist-menu-item}}
      {{/mist-menu-dropdown-item}}
    {{/mist-menu}}
  </div>

  <div id={{concat guid '-map'}}></div>
  {{yield (hash actions=(component 'ember-wormhole' to=(concat guid '-actions')) map=(component 'ember-wormhole' to=(concat guid '-map')) new=(component 'ember-wormhole' to=(concat guid '-new')) models=mapModels)}}

  {{#if isMultipleModelTypes}}
    <div class="model-type-selector">
      {{input-select class="plain-select" selectOptions=multipleModelTypeSelectOptions value=activeModelType isRequired=true valueChanged=(action 'activeModelTypeChanged')}}
    </div>
  {{/if}}

  {{#light-table table height=tableHeight class="table-responsive" tableClassNames=(concat "table table-hover" (if fetchRecords.isRunning ' is-busy')) as |t|}}
    {{#if (not hideColumnHeadings)}}
      {{t.head fixed=fixed onColumnClick=(action 'onColumnClick') iconAscending='zmdi zmdi-chevron-down' iconDescending='zmdi zmdi-chevron-up'}}
    {{/if}}

    {{#t.body onRowClick=(action 'onRowClick') onRowMouseEnter=(action 'onRowMouseEnter') onRowMouseLeave=(action 'onRowMouseLeave') as |body|}}
      {{#if table.isEmpty}}
        {{#body.no-data}}
          No data found
        {{/body.no-data}}
      {{/if}}
    {{/t.body}}
  {{/light-table}}

  <div class="table-footer">
    {{mist-model-table-controls toggleDisplaySelected=(action 'toggleDisplaySelected') amountSelected=amountSelected isBusy=fetchRecords.isRunning currentPage=queryParams.page lastPage=lastPage rows=queryParams.limit firstRow=resultRowFirst lastRow=resultRowLast totalCount=resultTotalCount nextPage=(action 'nextPage') prevPage=(action 'prevPage') pageSelected=(action 'pageSelected') rowsSelected=(action 'limitChanged')}}
  </div>
{{/if}}
